{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["let candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nlet candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nlet matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n\n  let regularTabbables = [];\n  let orderedTabbables = [];\n\n  let candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable\n  );\n\n  candidates.forEach(function (candidate, i) {\n    let candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  let tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n}\n\nfunction focusable(el, options) {\n  options = options || {};\n\n  let candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable\n  );\n\n  return candidates;\n}\n\nfunction getCandidates(el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n}\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nlet focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\nfunction isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  let tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isDetailsWithSummary(node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n  let radioSet = radioScope.querySelectorAll(\n    'input[type=\"radio\"][name=\"' + node.name + '\"]'\n  );\n  let checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') return true;\n\n  const isDirectSummary = node.matches('details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (nodeUnderDetails.matches('details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') return true;\n    node = node.parentElement;\n  }\n\n  return false;\n}\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n"],"names":["candidateSelectors","candidateSelector","join","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","tabbable","el","options","regularTabbables","orderedTabbables","candidates","getCandidates","includeContainer","isNodeMatchingSelectorTabbable","forEach","candidate","i","candidateTabindex","getTabindex","push","documentOrder","tabIndex","node","tabbableNodes","sort","sortOrderedTabbables","map","a","concat","focusable","isNodeMatchingSelectorFocusable","filter","Array","slice","apply","querySelectorAll","call","unshift","isNonTabbableRadio","isTabbable","Error","disabled","isHiddenInput","isHidden","isDetailsWithSummary","focusableCandidateSelector","isFocusable","tabindexAttr","parseInt","getAttribute","isNaN","isContentEditable","nodeName","b","contentEditable","isInput","tagName","type","r","children","some","child","isRadio","isTabbableRadio","getCheckedRadio","nodes","form","length","checked","name","radioScope","ownerDocument","radioSet","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display"],"mappings":"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"}