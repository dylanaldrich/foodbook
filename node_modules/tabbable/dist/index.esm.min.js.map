{"version":3,"file":"index.esm.min.js","sources":["../src/index.js"],"sourcesContent":["let candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nlet candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nlet matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n\n  let regularTabbables = [];\n  let orderedTabbables = [];\n\n  let candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable\n  );\n\n  candidates.forEach(function (candidate, i) {\n    let candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  let tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n}\n\nfunction focusable(el, options) {\n  options = options || {};\n\n  let candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable\n  );\n\n  return candidates;\n}\n\nfunction getCandidates(el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n}\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nlet focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\nfunction isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  let tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isDetailsWithSummary(node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n  let radioSet = radioScope.querySelectorAll(\n    'input[type=\"radio\"][name=\"' + node.name + '\"]'\n  );\n  let checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') return true;\n\n  const isDirectSummary = node.matches('details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (nodeUnderDetails.matches('details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') return true;\n    node = node.parentElement;\n  }\n\n  return false;\n}\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n"],"names":["candidateSelectors","candidateSelector","join","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","tabbable","el","options","regularTabbables","orderedTabbables","getCandidates","includeContainer","isNodeMatchingSelectorTabbable","forEach","candidate","i","candidateTabindex","getTabindex","push","documentOrder","tabIndex","node","sort","sortOrderedTabbables","map","a","concat","focusable","isNodeMatchingSelectorFocusable","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isInput","type","isRadio","name","checked","nodes","form","length","getCheckedRadio","ownerDocument","isTabbableRadio","isNonTabbableRadio","isTabbable","Error","disabled","isHiddenInput","getComputedStyle","visibility","parentElement","display","isHidden","tagName","children","some","child","isDetailsWithSummary","focusableCandidateSelector","isFocusable","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","b"],"mappings":"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"}